<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-5">
    <div>
      <h1 class="display-5 fw-bold">Choose a Pack</h1>
      <p class="text-highlight-muted">
        Select a question pack to start a new room
      </p>
    </div>
    <button class="btn add-btn" (click)="showCreateModal = true">
      <i class="fas fa-plus me-2"></i> Create New Pack
    </button>
  </div>

  <div *ngIf="packs.length === 0" class="text-center">
    <div class="card bg-dark text-light p-4 d-inline-block">
      <p class="mb-0">No packs available</p>
    </div>
  </div>

  <div class="row g-4" *ngIf="packs.length > 0">
    <div *ngFor="let pack of packs" class="col-md-6 col-lg-4">
      <div class="card bg-dark text-light h-100 shadow-sm">
        <div class="card-body d-flex flex-column">
          <h3 class="h5 mb-3">{{ pack.name }}</h3>
          <div class="mb-3 flex-grow-1">
            <h6 class="text-primary mb-2">Questions:</h6>
            <ul class="list-unstyled small">
              <li
                *ngFor="let question of pack.questions"
                class="mb-1 text-light"
              >
                â€¢ {{ question.text }}
              </li>
            </ul>
          </div>
          <button
            (click)="createRoom(pack.id, pack.name)"
            class="btn btn-outline-primary mt-auto"
          >
            Create Room with this Pack
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

@if (showCreateModal) {
<div
  class="modal fade show d-block"
  style="background: rgba(0, 0, 0, 0.5)"
  tabindex="-1"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Create New Pack</h5>
        <button
          type="button"
          class="btn-close"
          (click)="showCreateModal = false"
        ></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Pack Name</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="newPackName"
            name="packName"
            placeholder="Enter pack name"
          />
        </div>

        <div class="mb-4">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <label class="form-label mb-0">Questions</label>
            <button
              type="button"
              class="btn btn-outline-primary btn-sm"
              (click)="addQuestion()"
            >
              <i class="fas fa-plus"></i> Add Question
            </button>
          </div>

          <div class="question-list">
            @for (question of newPackQuestions; track $index) {
            <div class="mb-2">
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="newPackQuestions[$index]"
                  name="question_{{ $index }}"
                  placeholder="Enter question text"
                />
                <button
                  *ngIf="newPackQuestions.length > 1"
                  class="btn btn-outline-danger"
                  type="button"
                  (click)="removeQuestion($index)"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </div>
            }
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="showCreateModal = false"
        >
          Cancel
        </button>
        <button type="button" class="btn btn-primary" (click)="createPack()">
          Save Pack
        </button>
      </div>
    </div>
  </div>
</div>
}
